<!DOCTYPE HTML>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=320" />
    <script type="text/javascript">
        function command(message) {
            var elem = document.getElementById("cmd");
            if (elem) {
                elem.innerText = message;
            }
        }

        // エレメントにイベント関数を追加する
        var addEvent = window.addEventListener ?
            function(element, type, func){ element.addEventListener(type, func, false); } :
            function(element, type, func){ element.attachEvent("on"+type, func); };

        // エレメントからイベント関数を削除する
        var removeEvent = window.removeEventListener ?
            function(element, type, func){ element.removeEventListener(type, func, false); } :
            function(element, type, func){ element.detachEvent("on"+type, func); };

        // イベントのデフォルト動作を抑制する
        function preventDefault(event){ 
            if(event.preventDefault){
                event.preventDefault();
            }else{
                event.returnValue = false;
            } 
        }
        
        var count = 0;
        
        // キーダウン処理
        function onKeyDown(event)
        {
            //document.getElementById("txKeyDown").value = event.keyCode;
            //document.getElementById("txCount").value = ++count;
            //preventDefault(event);
            switch (event.keyCode){
                case 37: //left
                    command("left");
                    break;
                case 38: //up
                    command("up");
                    break;
                case 39: //right
                    command("right");
                    break;
                case 40: //down
                    command("down");
                    break;
                case 13: // "A"
                    command("A");
                    break;
            }
        }
        // キーアップ処理
        function onKeyUp(event)
        {
            //document.getElementById("txKeyUp").value = event.keyCode;
            //document.getElementById("txCount").value = ++count;
            preventDefault(event);
            command("");
        }
    
        //キーイベント登録
        addEvent(document, "keydown", onKeyDown);
        addEvent(document, "keyup", onKeyUp);
        
    </script>

    <script type="text/javascript" src="WebSocketTest.js"></script>
    <script type="text/javascript" src="WebSocketTest2.js"></script>

    <style>
    </style>

    <title>Romo Http Server</title>
</head>
<body>
<strong>This is ROMO on the web.</strong>
<hr>
<div id="cmd" style="background-color: #88FF88;"> </div>

<br/>
<a href="javascript:WebSocketTest()">Does my browser support WebSockets?</a><br/>
<br/>
<a href="javascript:WebSocketTest2()">Open WebSocket and tell me what time it is.</a>


<hr>
CocoaHTTPServer

</body>
</html>
